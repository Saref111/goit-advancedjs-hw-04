{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/js/ui.js","../src/main.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '40884603-5ad171707053fe9611639638b';\n\nexport const fetchImages = ({\n  searchQuery = '',\n  currentPage = 1,\n  pageSize = 40,\n}) => {\n  return fetch(\n    `${BASE_URL}?image_type=photo&orientation=horizontal&q=${searchQuery}&page=${currentPage}&per_page=${pageSize}&key=${API_KEY}&safeSearch=true`\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(\n      new Error(`No response from server on request ${searchQuery}`)\n    );\n  });\n};\n","import iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst loadMoreButtonElement = document.querySelector('.load-more');\nconst imagesList = document.querySelector('.gallery');\n\nconst renderImagesListItem = item => {\n  return `\n          <li class=\"gallery__item\">\n              <a href=\"${item.largeImageURL}\">\n                  <img \n                      src=\"${item.webformatURL}\" \n                      alt=\"${item.tags}\" \n                      class=\"gallery__image\" \n                      loading=\"lazy\"    \n                  />\n              </a>\n              <div class=\"info\">\n                  <p class=\"info__item\">\n                      <b>Likes</b> ${item.likes}\n                  </p>\n                  <p class=\"info__item\">\n                      <b>Views</b> ${item.views}\n                  </p>\n                  <p class=\"info__item\">\n                      <b>Comments</b> ${item.comments}\n                  </p>\n                  <p class=\"info__item\">\n                      <b>Downloads</b> ${item.downloads}\n                  </p> \n              </div>\n          </li>\n      `;\n};\n\nexport const showLoadMoreButton = cb => {\n  if (loadMoreButtonElement.classList.contains('load-more--visible')) return;\n\n  loadMoreButtonElement.addEventListener('click', cb);\n  loadMoreButtonElement.classList.add('load-more--visible');\n};\n\nexport const hideLoadMoreButton = cb => {\n  loadMoreButtonElement.removeEventListener('click', cb);\n  loadMoreButtonElement.classList.remove('load-more--visible');\n};\n\nexport const clearList = () => {\n  imagesList.innerHTML = '';\n};\n\nexport const renderImagesList = (list, isPaginated) => {\n  if (!isPaginated) {\n    clearList();\n  }\n\n  const imageElements = list.map(renderImagesListItem).join('');\n\n  imagesList.insertAdjacentHTML('beforeend', imageElements);\n};\n\nexport const renderError = message => {\n  iziToast.error({\n    title: 'Error',\n    message,\n    position: 'topRight',\n  });\n};\n","import { fetchImages } from './js/api';\nimport { renderImagesList, renderError, showLoadMoreButton, hideLoadMoreButton, clearList } from './js/ui';\n\nconst searchFormElement = document.querySelector('.search-form');\nconst requestData = {\n  q: '',\n  currentPage: 1,\n  pageSize: 40,\n};\nconst handleLoad = async event => {\n  event.preventDefault();\n  hideLoadMoreButton(handleLoad);\n\n  const formData = new FormData(searchFormElement);\n  const searchQuery = formData.get('searchQuery');\n\n  if (requestData.searchQuery !== searchQuery) {\n    requestData.searchQuery = searchQuery;\n    requestData.currentPage = 1;\n  }\n\n  try {\n    const resp = await fetchImages({ ...requestData });\n    \n    if (!resp.hits.length) {\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n    }\n\n    renderImagesList(resp.hits, requestData.currentPage !== 1);\n    showLoadMoreButton(handleLoad);\n    requestData.currentPage += 1;\n  } catch (error) {\n    renderError(error.message);\n    clearList();\n  }\n};\n\nsearchFormElement.addEventListener('submit', handleLoad);\n"],"names":["BASE_URL","API_KEY","fetchImages","searchQuery","currentPage","pageSize","response","loadMoreButtonElement","imagesList","renderImagesListItem","item","showLoadMoreButton","cb","hideLoadMoreButton","clearList","renderImagesList","list","isPaginated","imageElements","renderError","message","iziToast","searchFormElement","requestData","handleLoad","event","resp","error"],"mappings":"svBAAA,MAAMA,EAAW,2BACXC,EAAU,qCAEHC,EAAc,CAAC,CAC1B,YAAAC,EAAc,GACd,YAAAC,EAAc,EACd,SAAAC,EAAW,EACb,IACS,MACL,GAAGL,+CAAsDG,UAAoBC,cAAwBC,SAAgBJ,mBACzH,EAAI,KAAKK,GACDA,EAAS,GACJA,EAAS,OAGX,QAAQ,OACb,IAAI,MAAM,sCAAsCH,GAAa,CACnE,CACG,ECdGI,EAAwB,SAAS,cAAc,YAAY,EAC3DC,EAAa,SAAS,cAAc,UAAU,EAE9CC,EAAuBC,GACpB;AAAA;AAAA,yBAEgBA,EAAK;AAAA;AAAA,6BAEDA,EAAK;AAAA,6BACLA,EAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAOGA,EAAK;AAAA;AAAA;AAAA,qCAGLA,EAAK;AAAA;AAAA;AAAA,wCAGFA,EAAK;AAAA;AAAA;AAAA,yCAGJA,EAAK;AAAA;AAAA;AAAA;AAAA,QAOjCC,EAAqBC,GAAM,CAClCL,EAAsB,UAAU,SAAS,oBAAoB,IAEjEA,EAAsB,iBAAiB,QAASK,CAAE,EAClDL,EAAsB,UAAU,IAAI,oBAAoB,EAC1D,EAEaM,EAAqBD,GAAM,CACtCL,EAAsB,oBAAoB,QAASK,CAAE,EACrDL,EAAsB,UAAU,OAAO,oBAAoB,CAC7D,EAEaO,EAAY,IAAM,CAC7BN,EAAW,UAAY,EACzB,EAEaO,EAAmB,CAACC,EAAMC,IAAgB,CAChDA,GACHH,IAGF,MAAMI,EAAgBF,EAAK,IAAIP,CAAoB,EAAE,KAAK,EAAE,EAE5DD,EAAW,mBAAmB,YAAaU,CAAa,CAC1D,EAEaC,EAAcC,GAAW,CACpCC,EAAS,MAAM,CACb,MAAO,QACP,QAAAD,EACA,SAAU,UACd,CAAG,CACH,ECjEME,EAAoB,SAAS,cAAc,cAAc,EACzDC,EAAc,CAClB,EAAG,GACH,YAAa,EACb,SAAU,EACZ,EACMC,EAAa,MAAMC,GAAS,CAChCA,EAAM,eAAc,EACpBZ,EAAmBW,CAAU,EAG7B,MAAMrB,EADW,IAAI,SAASmB,CAAiB,EAClB,IAAI,aAAa,EAE1CC,EAAY,cAAgBpB,IAC9BoB,EAAY,YAAcpB,EAC1BoB,EAAY,YAAc,GAG5B,GAAI,CACF,MAAMG,EAAO,MAAMxB,EAAY,CAAE,GAAGqB,CAAa,CAAA,EAEjD,GAAI,CAACG,EAAK,KAAK,OACb,MAAM,IAAI,MACR,0EACR,EAGIX,EAAiBW,EAAK,KAAMH,EAAY,cAAgB,CAAC,EACzDZ,EAAmBa,CAAU,EAC7BD,EAAY,aAAe,CAC5B,OAAQI,EAAP,CACAR,EAAYQ,EAAM,OAAO,EACzBb,GACD,CACH,EAEAQ,EAAkB,iBAAiB,SAAUE,CAAU"}